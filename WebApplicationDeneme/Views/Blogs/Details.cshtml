@model WebApplicationDeneme.Models.Blog
@{
    ViewData["Title"] = Model.Title;
    var img = string.IsNullOrWhiteSpace(Model.ImagePath) ? "~/assets/img/blog-default.jpg" : Model.ImagePath;
    var related = ViewBag.Related as List<WebApplicationDeneme.Models.Blog> ?? new();
}

<style>
    .blog-hero {
        border-radius: 16px;
        overflow: hidden;
    }

    .related img {
        aspect-ratio: 16/10;
        object-fit: cover;
        border-radius: .5rem;
    }
</style>

<div class="container py-4">
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Ana Sayfa</a></li>
            <li class="breadcrumb-item"><a asp-controller="Blogs" asp-action="Index">Blog</a></li>
            <li class="breadcrumb-item active" aria-current="page">@Model.Title</li>
        </ol>
    </nav>

    <article class="row g-4">
        <div class="col-lg-8">
            <div class="blog-hero mb-3">
                <img src="@Url.Content(img)" class="w-100" alt="@Model.Title" />
            </div>

            <h1 class="mb-2">@Model.Title</h1>
            <div class="text-muted mb-4">
                Yayın: @Model.CreatedAt.ToString("dd MMMM yyyy")
            </div>

            <div class="content lead" style="white-space:pre-wrap;">
                @Model.LongText
            </div>

            <div class="mt-4">
                <a class="btn btn-outline-secondary" asp-action="Index">← Blog listesine dön</a>
            </div>
        </div>

        <aside class="col-lg-4">
            <h5 class="mb-3">Diğer Yazılar</h5>
            <div class="related d-grid gap-3">
                @foreach (var b in related)
                {
                    var rimg = string.IsNullOrWhiteSpace(b.ImagePath) ? "~/assets/img/blog-default.jpg" : b.ImagePath;
                    <a class="text-decoration-none text-reset" asp-action="Details" asp-route-id="@b.Id">
                        <div class="d-flex gap-3">
                            <img src="@Url.Content(rimg)" width="110" height="70" alt="@b.Title" />
                            <div>
                                <div class="fw-semibold">@b.Title</div>
                                <div class="small text-muted">@b.CreatedAt.ToString("dd.MM.yyyy")</div>
                            </div>
                        </div>
                    </a>
                }
            </div>
        </aside>
    </article>
</div>
